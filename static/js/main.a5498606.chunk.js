(this["webpackJsonpmovie-recomender"]=this["webpackJsonpmovie-recomender"]||[]).push([[0],{134:function(e,t,n){"use strict";n.r(t);var a,c,r,i,s,o,l,j,b,u,d,O,f,p,g,h,x,m,v,S,w,y,k,I,N=n(0),_=n(12),J=n.n(_),F=n(21),C=n.n(F),E=n(32),R=n(16),W=n(10),B=n(44),U=n(13),L=n(180),z=n(179),T=n(11),P=n(2),V=T.b.h1(a||(a=Object(W.a)(["\n  text-align: center;\n"]))),D=function(e){return Object(P.jsx)(V,{children:e.title})},H=n(183),q=n(168),A=n(181),G=function(e){var t=e.step;return Object(P.jsx)(H.a,{activeStep:t,children:[1,2,3].map((function(e,t){return Object(P.jsx)(q.a,{children:Object(P.jsx)(A.a,{})},e)}))})},K=T.b.form(c||(c=Object(W.a)(["\n  padding: 10px 40px;\n  max-width: 500px;\n  margin: auto;\n"]))),M=Object(T.b)(L.a)(r||(r=Object(W.a)(["\n  margin: 30px auto;\n  background: linear-gradient(45deg, #ff5d80 30%, #ff7d37 90%);\n  font-weight: bold;\n  color: #fff;\n  border-radius: 8px;\n  max-width: 500px;\n"]))),Q=function(e){var t=e.onSetName,n=(e.username,Object(U.f)()),a=Object(N.useState)(),c=Object(R.a)(a,2),r=c[0],i=c[1],s=Object(N.useState)(!1),o=Object(R.a)(s,2),l=o[0],j=o[1];return Object(N.useEffect)((function(){var e=localStorage.getItem("username");console.log(!!e),e&&"null"!=e&&(t(e),n.push("/movies"))}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(G,{step:0}),Object(P.jsx)(D,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(P.jsxs)(K,{noValidate:!0,autoComplete:"off",children:[Object(P.jsx)(z.a,{error:l,id:"outlined-basic",label:"\u0418\u043c\u044f",variant:"outlined",helperText:"\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0438\u043c\u044f, \u0447\u0442\u043e\u0431\u044b \u0434\u0440\u0443\u0433\u0438\u0435 \u043c\u043e\u0433\u043b\u0438 \u043d\u0430\u0439\u0442\u0438 \u0432\u0430\u0448\u0438 \u043e\u0446\u0435\u043d\u043a\u0438",fullWidth:!0,onInput:function(e){j(!1),i(e.target.value)}}),Object(P.jsx)(M,{variant:"contained",disableElevation:!0,fullWidth:!0,onClick:function(){r&&"null"!==r?(t(r),n.push("/movies")):j(!0)},children:"\u0414\u0430\u043b\u044c\u0448\u0435"})]})]})},X=n(95),Y=n(92),Z=n.n(Y),$=n(5),ee=n(171),te=n(172),ne=n(185),ae=n(173),ce=n(174),re=n(175),ie=n(184),se=n(93),oe=n.n(se),le=n(35),je=n.n(le),be=Object($.a)({iconFilled:{color:"#cc333b"},iconHover:{color:"#ff3d47"}})(ie.a),ue=Object(T.b)(L.a)(i||(i=Object(W.a)(["\n  margin: 30px auto;\n  background: linear-gradient(45deg, #ff5d80 30%, #ff7d37 90%);\n  font-weight: bold;\n  color: #fff;\n  border-radius: 8px;\n  max-width: 500px;\n"]))),de=T.b.div(s||(s=Object(W.a)(["\n  position: relative;\n  padding: 20px;\n  width: 100%;\n"]))),Oe=T.b.h3(o||(o=Object(W.a)(["\n  font-size: 16px;\n  font-weight: 500;\n"]))),fe=Object(T.b)(L.a)(l||(l=Object(W.a)(["\n  position: absolute;\n  top: -60px;\n  right: 20px;\n"]))),pe=Object(T.b)(ee.a)(j||(j=Object(W.a)(["\n  padding-top: 100%;\n"]))),ge=Object(T.b)(te.a)(b||(b=Object(W.a)(["\n  min-height: 350px;\n  transition: all 0.3s;\n  &:hover {\n    transform: scale(1.05);\n  }\n"]))),he=T.b.div(u||(u=Object(W.a)(["\n  display: grid;\n  justify-content: center;\n"]))),xe=function(e){var t=e.apiUrl,n=e.onSetRatings,a=e.onSetName,c=Object(U.f)(),r=Object(N.useState)({}),i=Object(R.a)(r,2),s=i[0],o=i[1],l=Object(N.useState)([]),j=Object(R.a)(l,2),b=j[0],u=j[1],d=function(){var e=Object(E.a)(C.a.mark((function e(){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.a.get(t+"/get-films?n=12");case 2:n=e.sent,a=n.data,console.log(a),u(a.films);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(N.useEffect)((function(){var e=localStorage.getItem("username"),r=localStorage.getItem("ratings");if(console.log(!!r),e&&"null"!==e)if(r&&"null"!=r&&Object.keys(JSON.parse(r)).length>0)c.push("/friends");else{n(JSON.parse(r)),a(e),console.log(t);try{d()}catch(i){alert(i)}}else c.push("/")}),[]);var O=function(){var e=Object(E.a)(C.a.mark((function e(){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u([]),e.prev=1,e.next=4,je.a.get(t+"/get-films?n=10");case 4:n=e.sent,a=n.data,console.log(a),u(a.films),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(G,{step:1}),Object(P.jsx)(D,{title:"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"}),Object(P.jsxs)(de,{children:[Object(P.jsx)(ne.a,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 (\u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u043e\u0446\u0435\u043d\u043a\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f)",arrow:!0,children:Object(P.jsx)(fe,{children:Object(P.jsx)(Z.a,{onClick:O})})}),Object(P.jsx)(ae.a,{container:!0,spacing:5,children:b.length?b.map((function(e){return Object(P.jsx)(ae.a,{item:!0,xs:3,children:Object(P.jsxs)(ge,{children:[Object(P.jsx)(pe,{image:"broken_poster"===e.poster_url?"".concat("/movie-recomender-app","/no_photo.png"):e.poster_url,title:""}),Object(P.jsxs)(ce.a,{children:[Object(P.jsx)(Oe,{children:e.film_title}),Object(P.jsx)(be,{name:"film"+e.film_id,defaultValue:0,precision:.5,icon:Object(P.jsx)(oe.a,{fontSize:"inherit"}),onChange:function(t,n){!function(e,t){var n=Object(X.a)({},s);n[e]=t,o(n)}(e.film_id,n)}},e.film_id)]})]})},e.film_id)})):Object(P.jsx)(ae.a,{item:!0,xs:12,children:Object(P.jsx)(he,{children:Object(P.jsx)(re.a,{})})})})]}),Object(P.jsx)(ue,{variant:"contained",disableElevation:!0,fullWidth:!0,onClick:function(){0!==Object.keys(s).length?(n(s),c.push("/friends")):alert("\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0438\u043b\u044c\u043c")},children:"\u0414\u0430\u043b\u044c\u0448\u0435"})]})},me=n(59),ve=Object(T.b)(L.a)(d||(d=Object(W.a)(["\n  margin: 30px auto;\n  background: linear-gradient(45deg, #ff5d80 30%, #ff7d37 90%);\n  font-weight: bold;\n  color: #fff;\n  border-radius: 8px;\n  max-width: 500px;\n"]))),Se=Object(T.b)(L.a)(O||(O=Object(W.a)(["\n  font-weight: bold;\n  color: #fff;\n  ","\n"])),(function(e){return"green"===e.green&&Object(T.a)(f||(f=Object(W.a)(["\n      background: #1fc409 !important;\n      color: #000;\n    "])))})),we=T.b.div(p||(p=Object(W.a)(["\n  position: relative;\n  padding: 20px;\n"]))),ye=T.b.div(g||(g=Object(W.a)(["\n  display: grid;\n  justify-content: center;\n  width: 100%;\n"]))),ke=T.b.h2(h||(h=Object(W.a)(["\n  text-align: center;\n  font-size: 20px;\n  font-weight: 300;\n  margin-top: 0;\n"]))),Ie=Object(T.b)(te.a)(x||(x=Object(W.a)(["\n  transition: all 0.3s;\n  &:hover {\n    transform: scale(1.05);\n  }\n"]))),Ne=function(e){var t=e.onSetRatings,n=e.onSetName,a=e.onSetFriends,c=e.apiUrl,r=Object(U.f)(),i=Object(N.useState)([]),s=Object(R.a)(i,2),o=s[0],l=s[1],j=Object(N.useState)([]),b=Object(R.a)(j,2),u=b[0],d=b[1],O=Object(N.useState)(!1),f=Object(R.a)(O,2),p=f[0],g=f[1],h=function(){var e=Object(E.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,a(u);case 3:t=e.sent,console.log(t),g(!1),t&&r.push("/result");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(E.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.a.get(c+"/get_users");case 2:t=e.sent,n=t.data,l(n.friends);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.useEffect)((function(){var e=localStorage.getItem("username"),a=localStorage.getItem("ratings");localStorage.getItem("friends");e&&"null"!==e||r.push("/"),!a||"null"===a||a&&!a.length?r.push("/movies"):(t(JSON.parse(a)),n(e),x())}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(G,{step:2}),Object(P.jsx)(D,{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0430\u0448\u0438\u0445 \u0434\u0440\u0443\u0437\u0435\u0439"}),Object(P.jsx)(ke,{children:"\u041c\u044b \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u043f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u043c\u044b \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0434\u043b\u044f \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430!"}),p?Object(P.jsx)(ye,{children:Object(P.jsx)(re.a,{})}):Object(P.jsx)(we,{children:Object(P.jsx)(ae.a,{container:!0,spacing:5,children:o&&o.length?o.map((function(e,t){return Object(P.jsx)(ae.a,{item:!0,xs:3,children:Object(P.jsx)(Ie,{children:Object(P.jsx)(Se,{fullWidth:!0,green:e.green?"green":"",onClick:function(){!function(e,t){var n=o;if(!0===o[t].green?(console.log(n[t].green),n[t].green=!1,console.log(n[t].green),l(Object(me.a)(n))):(n[t].green=!0,l(Object(me.a)(n))),u.indexOf(e)>=0){var a=u;1===a.length?a=[]:a.splice(u.indexOf(e),1),d(a),console.log(a)}else d([].concat(Object(me.a)(u),[e]))}(e.user_id,t)},children:e.username})})},t)})):Object(P.jsxs)(ye,{children:[Object(P.jsx)(we,{}),Object(P.jsx)(ae.a,{item:!0,xs:12,children:Object(P.jsx)(re.a,{})})]})})}),Object(P.jsx)(ve,{disabled:p,variant:"contained",disableElevation:!0,fullWidth:!0,onClick:h,children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044e"})]})},_e=n(169),Je=Object(T.b)(L.a)(m||(m=Object(W.a)(["\n  margin: 30px auto;\n  background: linear-gradient(45deg, #ff5d80 30%, #ff7d37 90%);\n  font-weight: bold;\n  color: #fff;\n  border-radius: 8px;\n  max-width: 500px;\n"]))),Fe=T.b.div(v||(v=Object(W.a)(["\n  position: relative;\n  padding: 20px;\n"]))),Ce=Object(T.b)(ee.a)(S||(S=Object(W.a)(["\n  padding-top: 110%;\n"]))),Ee=Object(T.b)(te.a)(w||(w=Object(W.a)(["\n  transition: all 0.3s;\n  &:hover {\n    transform: scale(1.05);\n  }\n"]))),Re=T.b.div(y||(y=Object(W.a)(["\n  display: grid;\n  justify-content: center;\n"]))),We=function(e){var t=e.onSetRatings,n=e.onSetName,a=e.onSetFriends,c=e.result,r=e.onResetLocalStorage,i=Object(U.f)(),s=Object(N.useState)([]),o=Object(R.a)(s,2),l=o[0],j=o[1];return Object(N.useEffect)((function(){var e=localStorage.getItem("username"),c=localStorage.getItem("ratings"),r=localStorage.getItem("friends"),s=localStorage.getItem("result");e&&"null"!==e||i.push("/"),(!c||"null"===c||c&&!c.length)&&i.push("/movies"),(!c||"null"===c||c&&!c.length)&&i.push("/friends"),s&&"null"!=c&&s.length?j(JSON.parse(s)):(t(JSON.parse(c)),n(e),a(JSON.parse(r)))}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(D,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"}),Object(P.jsx)(Fe,{children:Object(P.jsx)(ae.a,{container:!0,spacing:5,children:c&&c.length?c.map((function(e){return Object(P.jsx)(ae.a,{item:!0,xs:3,children:Object(P.jsxs)(Ee,{children:[Object(P.jsx)(Ce,{image:"broken_poster"===e.poster_url?"".concat("/movie-recomender-app","/no_photo.png"):e.poster_url,title:""}),Object(P.jsx)(ce.a,{children:Object(P.jsx)(_e.a,{gutterBottom:!0,variant:"h6",component:"h5",children:e.film_title})})]})},e.film_id)})):l&&l.length?l.map((function(e){return Object(P.jsx)(ae.a,{item:!0,xs:3,children:Object(P.jsxs)(Ee,{children:[Object(P.jsx)(Ce,{image:e.poster_url,title:""}),Object(P.jsx)(ce.a,{children:Object(P.jsx)(_e.a,{gutterBottom:!0,variant:"h6",component:"h5",children:e.film_title})})]})},e.film_id)})):Object(P.jsx)(ae.a,{item:!0,xs:12,children:Object(P.jsx)(Re,{children:Object(P.jsxs)(_e.a,{gutterBottom:!0,variant:"h6",component:"h5",children:["\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e! ",Object(P.jsx)("br",{}),"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441 \u0431\u043e\u043b\u044c\u0448\u0438\u043c \u0447\u0438\u0441\u043b\u043e\u043c \u0444\u0438\u043b\u044c\u043c\u043e\u0432"]})})})})}),Object(P.jsx)(Je,{variant:"contained",disableElevation:!0,fullWidth:!0,onClick:function(){r(),i.push("/")},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0441\u043d\u0430\u0447\u0430\u043b\u0430"})]})},Be=n(94),Ue=n(176),Le=n(177),ze=n(135),Te=n(178),Pe="https://filmrecomendation.herokuapp.com",Ve=Object(T.b)(ze.a)(k||(k=Object(W.a)(["\n  padding: 20px 10px;\n  display: flex;\n  flex-direction: column;\n  border-radius: 10px;\n"]))),De=T.b.div(I||(I=Object(W.a)(["\n  padding: 40px 0;\n"])));var He=function(){var e=Object(Be.a)({palette:{type:"dark",primary:{main:"#ff8800"}}}),t=Object(N.useState)(""),n=Object(R.a)(t,2),a=n[0],c=n[1],r=Object(N.useState)({}),i=Object(R.a)(r,2),s=i[0],o=i[1],l=Object(N.useState)([]),j=Object(R.a)(l,2),b=(j[0],j[1]),u=Object(N.useState)([]),d=Object(R.a)(u,2),O=d[0],f=d[1];function p(e){c(e),localStorage.setItem("username",e)}function g(e){o(e),localStorage.setItem("ratings",JSON.stringify(e))}function h(e){return x.apply(this,arguments)}function x(){return(x=Object(E.a)(C.a.mark((function e(t){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(t),localStorage.setItem("friends",JSON.stringify(t)),e.prev=2,e.next=5,je.a.post(Pe+"/davaaaaay",{username:a,ratings:s,friends:t});case 5:return n=e.sent,c=n.data,console.log(c.films),f(c.films),localStorage.setItem("result",JSON.stringify(c.films)),e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(2),alert(e.t0),f(!1),e.abrupt("return",0);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}return Object(P.jsxs)(Ue.a,{theme:e,children:[Object(P.jsx)(Le.a,{}),Object(P.jsx)(De,{children:Object(P.jsx)(B.a,{children:Object(P.jsx)(Te.a,{maxWidth:"md",children:Object(P.jsx)(Ve,{elevation:3,children:Object(P.jsxs)(U.c,{children:[Object(P.jsx)(U.a,{path:"/",exact:!0,children:Object(P.jsx)(Q,{onSetName:p,username:"1"})}),Object(P.jsx)(U.a,{path:"/friends",exact:!0,children:Object(P.jsx)(Ne,{onSetRatings:g,onSetName:p,onSetFriends:h,apiUrl:Pe})}),Object(P.jsx)(U.a,{path:"/movies",exact:!0,children:Object(P.jsx)(xe,{onSetRatings:g,onSetName:p,apiUrl:Pe})}),Object(P.jsx)(U.a,{path:"/result",exact:!0,children:Object(P.jsx)(We,{result:O,onSetRatings:g,onSetName:p,onSetFriends:h,apiUrl:Pe,onResetLocalStorage:function(){localStorage.setItem("username","null"),localStorage.setItem("ratings",JSON.stringify({})),localStorage.setItem("friends",JSON.stringify([])),localStorage.setItem("result",JSON.stringify([])),c(""),o({}),b([]),f([])}})})]})})})})})]})},qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,186)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};J.a.render(Object(P.jsx)(He,{}),document.getElementById("root")),qe()}},[[134,1,2]]]);
//# sourceMappingURL=main.a5498606.chunk.js.map