(this["webpackJsonpmovie-recomender"]=this["webpackJsonpmovie-recomender"]||[]).push([[0],{134:function(e,t,n){"use strict";n.r(t);var a,c,r,i,s,l,o,j,b,u,d,O,f,p,x,h,g,m,v,S,w,y,k,I=n(0),N=n(12),_=n.n(N),F=n(21),J=n.n(F),C=n(32),E=n(16),R=n(10),W=n(44),U=n(13),B=n(181),z=n(180),T=n(11),L=n(3),P=T.b.h1(a||(a=Object(R.a)(["\n  text-align: center;\n"]))),V=function(e){return Object(L.jsx)(P,{children:e.title})},D=n(184),H=n(169),q=n(182),A=function(e){var t=e.step;return Object(L.jsx)(D.a,{activeStep:t,children:[1,2,3].map((function(e,t){return Object(L.jsx)(H.a,{children:Object(L.jsx)(q.a,{})},e)}))})},G=T.b.form(c||(c=Object(R.a)(["\n  padding: 10px 40px;\n  max-width: 500px;\n  margin: auto;\n"]))),K=Object(T.b)(B.a)(r||(r=Object(R.a)(["\n  margin: 30px auto;\n  background: linear-gradient(45deg, #ff5d80 30%, #ff7d37 90%);\n  font-weight: bold;\n  color: #fff;\n  border-radius: 8px;\n  max-width: 500px;\n"]))),M=function(e){var t=e.onSetName,n=(e.username,Object(U.f)()),a=Object(I.useState)(),c=Object(E.a)(a,2),r=c[0],i=c[1],s=Object(I.useState)(!1),l=Object(E.a)(s,2),o=l[0],j=l[1];return Object(I.useEffect)((function(){var e=localStorage.getItem("username");console.log(!!e),e&&"null"!=e&&(t(e),n.push("/movies"))}),[]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(A,{step:0}),Object(L.jsx)(V,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(L.jsxs)(G,{noValidate:!0,autoComplete:"off",children:[Object(L.jsx)(z.a,{error:o,id:"outlined-basic",label:"\u0418\u043c\u044f",variant:"outlined",helperText:"\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0438\u043c\u044f, \u0447\u0442\u043e\u0431\u044b \u0434\u0440\u0443\u0433\u0438\u0435 \u043c\u043e\u0433\u043b\u0438 \u043d\u0430\u0439\u0442\u0438 \u0432\u0430\u0448\u0438 \u043e\u0446\u0435\u043d\u043a\u0438",fullWidth:!0,onInput:function(e){j(!1),i(e.target.value)}}),Object(L.jsx)(K,{variant:"contained",disableElevation:!0,fullWidth:!0,onClick:function(){r?(t(r),n.push("/movies")):j(!0)},children:"\u0414\u0430\u043b\u044c\u0448\u0435"})]})]})},Q=n(95),X=n(91),Y=n.n(X),Z=n(5),$=n(172),ee=n(173),te=n(186),ne=n(174),ae=n(175),ce=n(176),re=n(185),ie=n(92),se=n.n(ie),le=n(35),oe=n.n(le),je=Object(Z.a)({iconFilled:{color:"#cc333b"},iconHover:{color:"#ff3d47"}})(re.a),be=Object(T.b)(B.a)(i||(i=Object(R.a)(["\n  margin: 30px auto;\n  background: linear-gradient(45deg, #ff5d80 30%, #ff7d37 90%);\n  font-weight: bold;\n  color: #fff;\n  border-radius: 8px;\n  max-width: 500px;\n"]))),ue=T.b.div(s||(s=Object(R.a)(["\n  position: relative;\n  padding: 20px;\n  width: 100%;\n"]))),de=T.b.h3(l||(l=Object(R.a)(["\n  font-size: 16px;\n  font-weight: 500;\n"]))),Oe=Object(T.b)(B.a)(o||(o=Object(R.a)(["\n  position: absolute;\n  top: -60px;\n  right: 20px;\n"]))),fe=Object(T.b)($.a)(j||(j=Object(R.a)(["\n  padding-top: 100%;\n"]))),pe=Object(T.b)(ee.a)(b||(b=Object(R.a)(["\n  min-height: 350px;\n  transition: all 0.3s;\n  &:hover {\n    transform: scale(1.05);\n  }\n"]))),xe=T.b.div(u||(u=Object(R.a)(["\n  display: grid;\n  justify-content: center;\n"]))),he=function(e){var t=e.apiUrl,n=e.onSetRatings,a=e.onSetName,c=Object(U.f)(),r=Object(I.useState)({}),i=Object(E.a)(r,2),s=i[0],l=i[1],o=Object(I.useState)([]),j=Object(E.a)(o,2),b=j[0],u=j[1],d=function(){var e=Object(C.a)(J.a.mark((function e(){var n,a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.a.get(t+"/get-films?n=12");case 2:n=e.sent,a=n.data,console.log(a),u(a.films);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(I.useEffect)((function(){var e=localStorage.getItem("username"),r=localStorage.getItem("ratings");if(console.log(!!r),e&&"null"!==e)if(r&&"null"!=r&&Object.keys(JSON.parse(r)).length>0)c.push("/friends");else{n(JSON.parse(r)),a(e),console.log(t);try{d()}catch(i){alert(i)}}else c.push("/")}),[]);var O=function(){var e=Object(C.a)(J.a.mark((function e(){var n,a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u([]),e.prev=1,e.next=4,oe.a.get(t+"/get-films?n=10");case 4:n=e.sent,a=n.data,console.log(a),u(a.films),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(A,{step:1}),Object(L.jsx)(V,{title:"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"}),Object(L.jsxs)(ue,{children:[Object(L.jsx)(te.a,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435 \u0444\u0438\u043b\u044c\u043c\u043e\u0432",arrow:!0,children:Object(L.jsx)(Oe,{children:Object(L.jsx)(Y.a,{onClick:O})})}),Object(L.jsx)(ne.a,{container:!0,spacing:5,children:b.length?b.map((function(e){return Object(L.jsx)(ne.a,{item:!0,xs:3,children:Object(L.jsxs)(pe,{children:[Object(L.jsx)(fe,{image:e.poster_url,title:""}),Object(L.jsxs)(ae.a,{children:[Object(L.jsx)(de,{children:e.film_title}),Object(L.jsx)(je,{name:"film"+e.film_id,defaultValue:0,precision:.5,icon:Object(L.jsx)(se.a,{fontSize:"inherit"}),onChange:function(t,n){!function(e,t){var n=Object(Q.a)({},s);n[e]=t,l(n)}(e.film_id,n)}},e.film_id)]})]})},e.film_id)})):Object(L.jsx)(ne.a,{item:!0,xs:12,children:Object(L.jsx)(xe,{children:Object(L.jsx)(ce.a,{})})})})]}),Object(L.jsx)(be,{variant:"contained",disableElevation:!0,fullWidth:!0,onClick:function(){0!==Object.keys(s).length?(n(s),c.push("/friends")):alert("\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0438\u043b\u044c\u043c")},children:"\u0414\u0430\u043b\u044c\u0448\u0435"})]})},ge=n(94),me=Object(T.b)(B.a)(d||(d=Object(R.a)(["\n  margin: 30px auto;\n  background: linear-gradient(45deg, #ff5d80 30%, #ff7d37 90%);\n  font-weight: bold;\n  color: #fff;\n  border-radius: 8px;\n  max-width: 500px;\n"]))),ve=Object(T.b)(B.a)(O||(O=Object(R.a)(["\n  font-weight: bold;\n  color: #fff;\n  ","\n"])),(function(e){return"green"===e.green&&Object(T.a)(f||(f=Object(R.a)(["\n      background: #1fc409 !important;\n      color: #000;\n    "])))})),Se=T.b.div(p||(p=Object(R.a)(["\n  position: relative;\n  padding: 20px;\n"]))),we=T.b.div(x||(x=Object(R.a)(["\n  display: grid;\n  justify-content: center;\n  width: 100%;\n"]))),ye=T.b.h2(h||(h=Object(R.a)(["\n  text-align: center;\n  font-size: 20px;\n  font-weight: 300;\n  margin-top: 0;\n"]))),ke=Object(T.b)(ee.a)(g||(g=Object(R.a)(["\n  transition: all 0.3s;\n  &:hover {\n    transform: scale(1.05);\n  }\n"]))),Ie=function(e){var t=e.onSetRatings,n=e.onSetName,a=e.onSetFriends,c=e.apiUrl,r=Object(U.f)(),i=Object(I.useState)([]),s=Object(E.a)(i,2),l=s[0],o=s[1],j=Object(I.useState)([]),b=Object(E.a)(j,2),u=b[0],d=b[1],O=Object(I.useState)(!1),f=Object(E.a)(O,2),p=f[0],x=f[1],h=function(){var e=Object(C.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,a(u);case 3:t=e.sent,console.log(t),x(!1),t&&r.push("/result");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(C.a)(J.a.mark((function e(){var t,n;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.a.get(c+"/get_users");case 2:t=e.sent,n=t.data,o(n.friends);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(I.useEffect)((function(){var e=localStorage.getItem("username"),a=localStorage.getItem("ratings");localStorage.getItem("friends");e&&"null"!==e||r.push("/"),!a||"null"===a||a&&!a.length?r.push("/movies"):(t(JSON.parse(a)),n(e),g())}),[]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(A,{step:2}),Object(L.jsx)(V,{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0430\u0448\u0438\u0445 \u0434\u0440\u0443\u0437\u0435\u0439"}),Object(L.jsx)(ye,{children:"\u041c\u044b \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u043f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u043c\u044b \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0434\u043b\u044f \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430!"}),p?Object(L.jsx)(we,{children:Object(L.jsx)(ce.a,{})}):Object(L.jsx)(Se,{children:Object(L.jsx)(ne.a,{container:!0,spacing:5,children:l&&l.length?l.map((function(e){return Object(L.jsx)(ne.a,{item:!0,xs:3,children:Object(L.jsx)(ke,{children:Object(L.jsx)(ve,{name:e.user_id,fullWidth:!0,green:u.indexOf(e.user_id)>=0?"green":"",onClick:function(){!function(e){if(u.indexOf(e)>=0){var t=u;console.log(t),1===t.length?t=[]:t.splice(u.indexOf(e),1),console.log(t),d(t),console.log(u)}else d([].concat(Object(ge.a)(u),[e]))}(e.user_id)},children:e.username})})},e.user_id)})):Object(L.jsxs)(we,{children:[Object(L.jsx)(Se,{}),Object(L.jsx)(ne.a,{item:!0,xs:12,children:Object(L.jsx)(ce.a,{})})]})})}),l&&l.length?Object(L.jsx)(me,{disabled:p,variant:"contained",disableElevation:!0,fullWidth:!0,onClick:h,children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044e"}):Object(L.jsx)(Se,{})]})},Ne=n(170),_e=T.b.div(m||(m=Object(R.a)(["\n  position: relative;\n  padding: 20px;\n"]))),Fe=Object(T.b)($.a)(v||(v=Object(R.a)(["\n  padding-top: 110%;\n"]))),Je=Object(T.b)(ee.a)(S||(S=Object(R.a)(["\n  transition: all 0.3s;\n  &:hover {\n    transform: scale(1.05);\n  }\n"]))),Ce=T.b.div(w||(w=Object(R.a)(["\n  display: grid;\n  justify-content: center;\n"]))),Ee=function(e){var t=e.onSetRatings,n=e.onSetName,a=e.onSetFriends,c=e.result,r=Object(U.f)(),i=Object(I.useState)([]),s=Object(E.a)(i,2),l=s[0],o=s[1];return Object(I.useEffect)((function(){var e=localStorage.getItem("username"),c=localStorage.getItem("ratings"),i=localStorage.getItem("friends"),s=localStorage.getItem("result");e&&"null"!==e||r.push("/"),(!c||"null"===c||c&&!c.length)&&r.push("/movies"),(!c||"null"===c||c&&!c.length)&&r.push("/friends"),s&&"null"!=c&&s.length?o(JSON.parse(s)):(t(JSON.parse(c)),n(e),a(JSON.parse(i)))}),[]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(V,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"}),Object(L.jsx)(_e,{children:Object(L.jsx)(ne.a,{container:!0,spacing:5,children:c&&c.length?c.map((function(e){return Object(L.jsx)(ne.a,{item:!0,xs:3,children:Object(L.jsxs)(Je,{children:[Object(L.jsx)(Fe,{image:e.poster_url,title:""}),Object(L.jsx)(ae.a,{children:Object(L.jsx)(Ne.a,{gutterBottom:!0,variant:"h6",component:"h5",children:e.film_title})})]})},e.film_id)})):l&&l.length?l.map((function(e){return Object(L.jsx)(ne.a,{item:!0,xs:3,children:Object(L.jsxs)(Je,{children:[Object(L.jsx)(Fe,{image:e.poster_url,title:""}),Object(L.jsx)(ae.a,{children:Object(L.jsx)(Ne.a,{gutterBottom:!0,variant:"h6",component:"h5",children:e.film_title})})]})},e.film_id)})):Object(L.jsx)(ne.a,{item:!0,xs:12,children:Object(L.jsx)(Ce,{children:Object(L.jsx)(ce.a,{})})})})})]})},Re=n(93),We=n(177),Ue=n(178),Be=n(135),ze=n(179),Te="https://filmrecomendation.herokuapp.com",Le=Object(T.b)(Be.a)(y||(y=Object(R.a)(["\n  padding: 20px 10px;\n  display: flex;\n  flex-direction: column;\n  border-radius: 10px;\n"]))),Pe=T.b.div(k||(k=Object(R.a)(["\n  padding: 40px 0;\n"])));var Ve=function(){var e=Object(Re.a)({palette:{type:"dark",primary:{main:"#ff8800"}}}),t=Object(I.useState)(""),n=Object(E.a)(t,2),a=n[0],c=n[1],r=Object(I.useState)({}),i=Object(E.a)(r,2),s=i[0],l=i[1],o=Object(I.useState)([]),j=Object(E.a)(o,2),b=(j[0],j[1]),u=Object(I.useState)([]),d=Object(E.a)(u,2),O=d[0],f=d[1];function p(e){c(e),localStorage.setItem("username",e)}function x(e){l(e),localStorage.setItem("ratings",JSON.stringify(e))}function h(e){return g.apply(this,arguments)}function g(){return(g=Object(C.a)(J.a.mark((function e(t){var n,c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(t),localStorage.setItem("friends",JSON.stringify(t)),e.prev=2,e.next=5,oe.a.post(Te+"/davaaaaay",{username:a,ratings:s,friends:t});case 5:return n=e.sent,c=n.data,console.log(c.films),f(c.films),localStorage.setItem("result",JSON.stringify(c.films)),e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(2),alert(e.t0),f(!1),e.abrupt("return",0);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}return Object(L.jsxs)(We.a,{theme:e,children:[Object(L.jsx)(Ue.a,{}),Object(L.jsx)(Pe,{children:Object(L.jsx)(W.a,{children:Object(L.jsx)(ze.a,{maxWidth:"md",children:Object(L.jsx)(Le,{elevation:3,children:Object(L.jsxs)(U.c,{children:[Object(L.jsx)(U.a,{path:"/",exact:!0,children:Object(L.jsx)(M,{onSetName:p,username:"1"})}),Object(L.jsx)(U.a,{path:"/friends",exact:!0,children:Object(L.jsx)(Ie,{onSetRatings:x,onSetName:p,onSetFriends:h,apiUrl:Te})}),Object(L.jsx)(U.a,{path:"/movies",exact:!0,children:Object(L.jsx)(he,{onSetRatings:x,onSetName:p,apiUrl:Te})}),Object(L.jsx)(U.a,{path:"/result",exact:!0,children:Object(L.jsx)(Ee,{result:O,onSetRatings:x,onSetName:p,onSetFriends:h,apiUrl:Te})})]})})})})})]})},De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,187)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};_.a.render(Object(L.jsx)(Ve,{}),document.getElementById("root")),De()}},[[134,1,2]]]);
//# sourceMappingURL=main.e0dc53dd.chunk.js.map